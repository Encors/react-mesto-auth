(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{3:function(e,t,n){},5:function(e,t,n){e.exports=n.p+"static/media/logo.7baba3c1.svg"},64:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(4),c=n.n(r),i=(n(3),n(8)),s=n(1),l=n(5),u=n.n(l);function m(){return o.a.createElement("header",{className:"header"},o.a.createElement("img",{className:"header__logo",src:u.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u041c\u0435\u0441\u0442\u043e"}))}var p=o.a.createContext();function d(e){var t=e.card,n=e.onCardClick,a=e.onCardLike,r=e.onCardDelete,c=o.a.useContext(p),i=t.owner._id===c._id,s=t.likes.some(function(e){return e._id===c._id}),l="photo-card__like-btn button ".concat(s&&"photo-card__like-btn_active");return o.a.createElement("article",{className:"photo-card"},o.a.createElement("img",{className:"photo-card__photo",src:t.link,alt:t.name,onClick:function(){n(t)}}),i&&o.a.createElement("button",{className:"photo-card__remove-btn button",type:"button",onClick:function(){r(t)}}),o.a.createElement("div",{className:"photo-card__decription"},o.a.createElement("h2",{className:"photo-card__title"},t.name),o.a.createElement("div",{className:"photo-card__like-section"},o.a.createElement("button",{className:l,type:"button",onClick:function(){a(t)}}),o.a.createElement("span",{className:"photo-card__like-count"},t.likes.length))))}function f(e){var t=e.onEditProfile,n=e.onEditAvatar,a=e.onAddPlace,r=e.onCardClick,c=e.cards,i=e.onCardLike,s=e.onCardDelete,l=o.a.useContext(p),u=c.map(function(e){return o.a.createElement(d,{key:e._id,card:e,onCardClick:r,onCardLike:i,onCardDelete:s})});return o.a.createElement("main",{className:"content"},o.a.createElement("section",{className:"profile"},o.a.createElement("div",{className:"profile__picture"},o.a.createElement("img",{src:l.avatar,className:"profile__avatar",alt:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f \u043f\u0440\u043e\u0444\u0438\u043b\u044f"}),o.a.createElement("button",{onClick:n,className:"profile__picture-btn button",type:"button"})),o.a.createElement("div",{className:"profile__info"},o.a.createElement("h1",{className:"profile__title"},l.name),o.a.createElement("p",{className:"profile__job"},l.about),o.a.createElement("button",{onClick:t,className:"profile__edit-btn button",type:"button"})),o.a.createElement("button",{onClick:a,className:"profile__add-btn button",type:"button"})),o.a.createElement("section",{className:"gallery","aria-label":"\u0421\u0435\u043a\u0446\u0438\u044f \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0439"},u))}function _(){return o.a.createElement("footer",{className:"footer"},o.a.createElement("p",{className:"footer__copyright"},"\xa9 ",(new Date).getFullYear(),". \u0410\u043a\u0430\u0435\u0432\u0430 \u0414\u0438\u0430\u043d\u0430"))}function b(e){var t=e.children,n=e.isOpen,r=e.onClose,c=e.classSelector,i=Object(a.useCallback)(function(e){(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close-btn")||"Escape"===e.key)&&r()},[r]);return Object(a.useEffect)(function(){if(n)return document.addEventListener("mousedown",i),document.addEventListener("keydown",i),function(){document.removeEventListener("keydown",i),document.removeEventListener("mousedown",i)}},[n,i]),o.a.createElement("div",{className:"popup popup_type_".concat(c," ").concat(n?"popup_opened":""," ")},t)}function h(e){var t=e.isOpen,n=e.card,a=e.classSelector,r=e.onClose;return o.a.createElement(b,{isOpen:t,classSelector:a,onClose:r},o.a.createElement("div",{className:"popup__container-photo"},o.a.createElement("button",{className:"popup__close-btn button",type:"button"}),o.a.createElement("figure",{className:"popup__figure"},o.a.createElement("img",{className:"popup__photo",src:n.link,alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0433\u043e\u0440\u043e\u0434\u0430: ".concat(n.name)}),o.a.createElement("figcaption",{className:"popup__caption"},n.name))))}var v=n(6),E=n(7),C=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(v.a)(this,e),this._url=n,this._headers=a}return Object(E.a)(e,[{key:"_getResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status," ").concat(e.statusText,")"))}},{key:"_request",value:function(e,t){return fetch(e,t).then(this._getResponse)}},{key:"getInitialCards",value:function(){return this._request(this._url+"/cards",{headers:this._headers})}},{key:"getUserInfo",value:function(){return this._request(this._url+"/users/me",{headers:this._headers})}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;return this._request(this._url+"/users/me",{headers:this._headers,method:"PATCH",body:JSON.stringify({name:t,about:n})})}},{key:"addNewCard",value:function(e){var t=e.name,n=e.link;return this._request(this._url+"/cards",{headers:this._headers,method:"POST",body:JSON.stringify({name:t,link:n})})}},{key:"putLike",value:function(e){return this._request(this._url+"/cards/".concat(e,"/likes"),{headers:this._headers,method:"PUT"})}},{key:"removeCard",value:function(e){return this._request(this._url+"/cards/".concat(e),{headers:this._headers,method:"DELETE"})}},{key:"deleteLike",value:function(e){return this._request(this._url+"/cards/".concat(e,"/likes"),{headers:this._headers,method:"DELETE"})}},{key:"setNewAvatar",value:function(e){return this._request(this._url+"/users/me/avatar",{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e.avatar})})}},{key:"getAllStartedInfo",value:function(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}}]),e}())({baseUrl:"https://nomoreparties.co/v1/cohort-54",headers:{authorization:"50abc53f-8d3e-448b-b494-88b8f2ced152","Content-Type":"application/json"}});function g(e){var t=e.classSelector,n=e.isOpen,a=e.formName,r=e.title,c=e.submitBtnText,i=e.children,s=e.onSubmit,l=e.onClose;return o.a.createElement(b,{isOpen:n,classSelector:t,onClose:l},o.a.createElement("div",{className:"popup__container"},o.a.createElement("button",{className:"popup__close-btn button",type:"button"}),o.a.createElement("h2",{className:"popup__title"},r),o.a.createElement("form",{className:"popup__form",name:a,onSubmit:s},i,o.a.createElement("button",{className:"popup__submit-btn button",type:"submit"},c))))}function O(e){var t=e.isOpen,n=e.onUpdateUser,a=e.isLoading,r=e.onClose,c=o.a.useContext(p),i=o.a.useState(""),l=Object(s.a)(i,2),u=l[0],m=l[1],d=o.a.useState(""),f=Object(s.a)(d,2),_=f[0],b=f[1];return o.a.useEffect(function(){m(c.name),b(c.about)},[c,t]),o.a.createElement(g,{classSelector:"edit-profile",formName:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",submitBtnText:a?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onSubmit:function(e){e.preventDefault(),n({name:u,about:_})},onClose:r},o.a.createElement("input",{type:"text",className:"popup__input popup__input_type_name",placeholder:"\u0418\u043c\u044f",name:"nameProfile",id:"name-profile",required:!0,minLength:2,maxLength:40,value:u||"",onChange:function(e){m(e.target.value)}}),o.a.createElement("span",{id:"name-profile-error",className:"error"}),o.a.createElement("input",{type:"text",className:"popup__input popup__input_type_job",placeholder:"\u041e \u0441\u0435\u0431\u0435",name:"jobProfile",id:"job-profile",required:!0,minLength:2,maxLength:200,value:_||"",onChange:function(e){b(e.target.value)}}),o.a.createElement("span",{id:"job-profile-error",className:"error"}))}function k(e){var t=e.isOpen,n=e.onAddPlace,r=e.isLoading,c=e.onClose,i=Object(a.useRef)(""),s=Object(a.useRef)("");return Object(a.useEffect)(function(){i.current.value="",s.current.value=""},[t]),o.a.createElement(g,{classSelector:"add-card",formName:"card",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",submitBtnText:r?"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435...":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:t,onSubmit:function(e){e.preventDefault(),n({name:i.current.value,link:s.current.value})},onClose:c},o.a.createElement("input",{type:"text",className:"popup__input popup__input_type_place-name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"nameCard",id:"name-card",required:!0,minLength:2,maxLength:30,ref:i}),o.a.createElement("span",{id:"name-card-error",className:"error"}),o.a.createElement("input",{type:"url",className:"popup__input popup__input_type_img-link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"linkCard",id:"link-card",required:!0,ref:s}),o.a.createElement("span",{id:"link-card-error",className:"error"}))}function N(e){var t=e.isOpen,n=e.onUpdateAvatar,r=e.isLoading,c=e.onClose,i=Object(a.useRef)("");return Object(a.useEffect)(function(){i.current.value=""},[t]),o.a.createElement(g,{classSelector:"set-avatar",formName:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",submitBtnText:r?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onSubmit:function(e){e.preventDefault(),n({avatar:i.current.value})},onClose:c},o.a.createElement("input",{type:"url",className:"popup__input popup__input_type_img-link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"avatar",id:"link-avatar",required:!0,ref:i}),o.a.createElement("span",{id:"link-avatar-error",className:"error"}))}function j(e){var t=e.deletingCard,n=e.isOpen,a=e.isLoading,r=e.onCardDelete,c=e.onClose;return o.a.createElement(g,{isOpen:n,classSelector:"confirm",formName:"confirm",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",submitBtnText:a?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...":"\u0414\u0430",onSubmit:function(e){e.preventDefault(),r(t)},onClose:c})}var y=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],b=Object(a.useState)(!1),v=Object(s.a)(b,2),E=v[0],g=v[1],y=Object(a.useState)(!1),S=Object(s.a)(y,2),L=S[0],x=S[1],w=Object(a.useState)({}),P=Object(s.a)(w,2),T=P[0],q=P[1],A=Object(a.useState)({}),D=Object(s.a)(A,2),U=D[0],I=D[1],B=Object(a.useState)([]),R=Object(s.a)(B,2),F=R[0],J=R[1],H=Object(a.useState)(!1),z=Object(s.a)(H,2),M=z[0],Y=z[1],G=Object(a.useState)(!1),K=Object(s.a)(G,2),Q=K[0],V=K[1],W=Object(a.useState)(!1),X=Object(s.a)(W,2),Z=X[0],$=X[1],ee=Object(a.useState)(!1),te=Object(s.a)(ee,2),ne=te[0],ae=te[1],oe=Object(a.useState)(!1),re=Object(s.a)(oe,2),ce=re[0],ie=re[1],se=Object(a.useState)(null),le=Object(s.a)(se,2),ue=le[0],me=le[1];Object(a.useEffect)(function(){C.getAllStartedInfo().then(function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];I(n),J(a)}).catch(function(e){console.log(e)})},[]);var pe=Object(a.useCallback)(function(){r(!1),d(!1),g(!1),x(!1),ie(!1),me(null)},[]);return o.a.createElement(p.Provider,{value:U},o.a.createElement("div",{className:"page"},o.a.createElement(m,null),o.a.createElement(f,{onEditProfile:function(){d(!0)},onAddPlace:function(){g(!0)},onEditAvatar:function(){r(!0)},onCardClick:function(e){x(!0),q(e)},onCardLike:function(e){e.likes.some(function(e){return e._id===U._id})?C.deleteLike(e._id).then(function(t){J(function(n){return n.map(function(n){return n._id===e._id?t:n})})}).catch(function(e){console.log(e)}):C.putLike(e._id).then(function(t){J(function(n){return n.map(function(n){return n._id===e._id?t:n})})}).catch(function(e){console.log(e)})},cards:F,onCardDelete:function(e){ie(!0),me(e)}}),o.a.createElement(_,null),o.a.createElement(O,{onClose:pe,isOpen:u,onUpdateUser:function(e){var t=e.name,n=e.about;Y(!0),C.setUserInfo({name:t,about:n}).then(function(e){I(e),pe()}).catch(function(e){console.log(e)}).finally(function(){Y(!1)})},isLoading:M}),o.a.createElement(k,{onClose:pe,isOpen:E,onAddPlace:function(e){var t=e.name,n=e.link;V(!0),C.addNewCard({name:t,link:n}).then(function(e){J([e].concat(Object(i.a)(F))),pe()}).catch(function(e){console.log(e)}).finally(function(){V(!1)})},isLoading:Q}),o.a.createElement(j,{onClose:pe,isOpen:ce,isLoading:Z,onCardDelete:function(e){$(!0),C.removeCard(e._id).then(function(){J(function(t){return t.filter(function(t){return t._id!==e._id})}),pe()}).catch(function(e){console.log(e)}).finally(function(){$(!1)})},deletingCard:ue}),o.a.createElement(N,{onClose:pe,isOpen:n,onUpdateAvatar:function(e){ae(!0),C.setNewAvatar(e).then(function(e){I(e),pe()}).catch(function(e){console.log(e)}).finally(function(){ae(!1)})},isLoading:ne}),o.a.createElement(h,{isOpen:L,card:T,onClose:pe,classSelector:"photo"})))},S=function(e){e&&e instanceof Function&&n.e(1).then(n.bind(null,65)).then(function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),o(e),r(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(y,null))),S()},9:function(e,t,n){e.exports=n(64)}},[[9,3,2]]]);
//# sourceMappingURL=main.2a27b922.chunk.js.map